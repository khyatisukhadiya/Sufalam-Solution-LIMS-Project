<app-sliderbar></app-sliderbar>


<div class="container p-3" style="max-width: 96%;">
    <!-- Header with Add Button -->
    <div class="d-flex justify-content-between align-items-center pb-3">
        <h5>Service List</h5>
        <button class="btn btn-primary btn-sm" data-bs-target="#myModal" (click)="openModal()">ADD</button>
    </div>

    <!-- Search Filter Section -->
    <!-- search table -->
    <div class="border border-dark rounded-2 my-3 p-3">
        <div class="row g-2">
            <!-- City Id -->
            <div class="col-md-3 col-sm-6">
                <div class="d-flex align-items-center">
                    <label class="form-label mb-0" style="min-width: 120px;">Sample Register Id</label>
                    <input type="number" class="form-control" placeholder="Service Id">
                </div>
            </div>

            <!-- City Code -->
            <div class="col-md-3 col-sm-6">
                <div class="d-flex align-items-center">
                    <label class="form-label mb-0" style="min-width: 120px;">Sample Register Code</label>
                    <input type="text" class="form-control" placeholder="service Code">
                </div>
            </div>

            <!-- City Name -->
            <div class="col-md-3 col-sm-6">
                <div class="d-flex align-items-center">
                    <label class="form-label mb-0" style="min-width: 120px;">Sample register Name</label>
                    <input type="text" class="form-control" placeholder="serviceName">
                </div>
            </div>

            <!-- Status -->
            <div class="col-md-3 col-sm-6">
                <div class="d-flex align-items-center">
                    <label class="form-label mb-0" style="min-width: 120px;">Status</label>
                    <select class="form-select">
                        <option [ngValue]="null">All</option>
                        <option [ngValue]="true">Active</option>
                        <option [ngValue]="false">Inactive</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Button Row -->
        <div class="row mt-3">
            <div class="col d-flex justify-content-end gap-2">
                <button class="btn btn-primary">Search</button>
                <button class="btn btn-danger" (click)="clearSearch()">Clear</button>
            </div>
        </div>
    </div>
</div>


<!-- Add/Edit Sample Register Modal -->
<div class="modal" id="sampleRegisterModal" #sampleRegisterModal tabindex="-1"
    aria-labelledby="sampleRegisterModalLabel" aria-hidden="true">
    <div class="modal-dialog" style="max-width: 1200px;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">{{ isEditModal ? 'Edit Sample Register' : 'Add Sample Register' }}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form [formGroup]="sampleRegisterForm">
                    <div class="row">
                        <!-- Left Side: Sample Register Form -->
                        <div class="col-md-8">
                            <form [formGroup]="sampleRegisterForm">
                                <table class="table table-borderless">
                                    <tbody>
                                        <tr>
                                            <td>
                                                <label for="id">Sample Register ID</label>
                                                <input type="text" class="form-control" id="id" formControlName="id"
                                                    readonly>
                                            </td>
                                            <td>
                                                <label for="date">Date</label>
                                                <input type="date" class="form-control" id="date"
                                                    formControlName="date">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label for="branch">Branch</label>
                                                <select class="form-select" id="branch" formControlName="branch">
                                                    <!-- <option *ngFor="let branch of branches" [value]="branch.name">
                                                        {{ branch.name }}
                                                    </option> -->
                                                </select>
                                            </td>

                                            <td>
                                                <label for="b2b">B2B</label>
                                                <div class="d-flex align-items-center">
                                                    <div class="form-check form-switch me-2">
                                                        <input class="form-check-input" type="checkbox" id="b2bToggle"
                                                            formControlName="isB2B"
                                                            [checked]="sampleRegisterForm.value.isB2B">
                                                    </div>
                                                    <!-- <select class="form-select" id="b2b" formControlName="b2b">
                                                        <option *ngFor="let b2b of b2bs" [value]="b2b.name">{{ b2b.name
                                                            }}</option>
                                                    </select> -->
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label for="mobile">Mobile Number</label>
                                                <input type="text" class="form-control" id="mobile"
                                                    formControlName="mobile">
                                                <div *ngIf="sampleRegisterForm.get('mobile')?.invalid && submitted"
                                                    class="text-danger small">
                                                    <span
                                                        *ngIf="sampleRegisterForm.get('mobile')?.errors?.['required']">Mobile
                                                        Number is required</span>
                                                    <span
                                                        *ngIf="sampleRegisterForm.get('mobile')?.errors?.['pattern']">Enter
                                                        a valid 10-digit number</span>
                                                </div>

                                            </td>
                                            <td>
                                                <label for="title">Title</label>
                                                <select class="form-select" id="title" formControlName="title">
                                                    <option>Select Title</option>
                                                    <option>Mr.</option>
                                                    <option>Ms.</option>
                                                    <option>Dr.</option>
                                                    <option>Miss.</option>
                                                </select>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label for="firstName">First Name</label>
                                                <input type="text" class="form-control" id="firstName"
                                                    placeholder="Surname" formControlName="firstName">
                                                <div *ngIf="sampleRegisterForm.get('firstName')?.invalid && submitted"
                                                    class="text-danger small">
                                                    First Name is required
                                                </div>
                                            </td>
                                            <td>
                                                <label for="middleName">Middle Name</label>
                                                <input type="text" class="form-control" id="middleName"
                                                    placeholder="User Name" formControlName="middleName">
                                                <div *ngIf="sampleRegisterForm.get('middleName')?.invalid && submitted"
                                                    class="text-danger small">
                                                    Middle Name is required
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label for="lastName">Last Name</label>
                                                <input type="text" class="form-control" id="lastName"
                                                    formControlName="lastName">
                                                <div *ngIf="sampleRegisterForm.get('lastName')?.invalid && submitted"
                                                    class="text-danger small">
                                                    Last Name is required
                                                </div>
                                            </td>
                                            <td>
                                                <label for="dob">Date of Birth (DOB)</label>
                                                <input type="date" class="form-control" id="dob" formControlName="dob">
                                                <div *ngIf="sampleRegisterForm.get('dob')?.invalid && submitted"
                                                    class="text-danger small">
                                                    BirthDate is required
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label for="age">Age:</label>
                                                <input type="number" id="age" formControlName="age"
                                                    class="form-control">
                                            </td>
                                            <td>
                                                <label for="gender">Gender</label>
                                                <select class="form-select" id="gender" formControlName="gender">
                                                    <option>Select Gender</option>
                                                    <option>Male</option>
                                                    <option>Female</option>
                                                    <option>Other</option>
                                                </select>
                                                <div *ngIf="sampleRegisterForm.get('gender')?.invalid && submitted"
                                                    class="text-danger small">
                                                    <span
                                                        *ngIf="sampleRegisterForm.get('gender')?.hasError('required')">Gender
                                                        is required.</span>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label for="email">Email ID</label>
                                                <input type="email" class="form-control" id="email"
                                                    formControlName="email">
                                            </td>
                                            <td>
                                                <label for="city">City</label>
                                                <!-- <select class="form-select" id="city" formControlName="city"
                                                    (change)="onCityChange()">
                                                    <option *ngFor="let city of cities" [value]="city.name">{{ city.name
                                                        }}</option>
                                                </select> -->
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label for="area">Area</label>
                                                <!-- <select class="form-select" id="area" formControlName="area">
                                                    <option *ngFor="let area of filteredAreas" [value]="area.name">{{
                                                        area.name
                                                        }}</option>
                                                </select> -->
                                            </td>
                                            <td>
                                                <label for="address">Address</label>
                                                <textarea class="form-control" id="address"
                                                    formControlName="address"></textarea>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </form>
                        </div>
                        <!-- Right Side: Services & Payment -->
                        <div class="col-md-4">
                            <form [formGroup]="sampleRegisterForm">
                                <!-- Service Selection -->
                                <div class="mb-3">
                                    <label>Service</label>
                                    <div class="d-flex">
                                        <select class="form-select" formControlName="service">
                                            <!-- <option value="">Select a service</option>
                                            <option *ngFor="let service of services" [value]="service.name">{{
                                                service.name }}</option> -->
                                        </select>
                                        <!-- <div *ngIf="sampleRegisterForm.get('service')?.invalid && submitted" class="text-danger small">
                                            <span *ngIf="sampleRegisterForm.get('service')?.hasError('required')">Service is required.</span>
                                        </div> -->
                                        <button type="button" class="btn btn-success ms-2">
                                            +
                                        </button>
                                    </div>
                                </div>

                                <!-- Service Table -->
                                <table class="table table-bordered mt-3">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Service Code</th>
                                            <th>Service Name</th>
                                            <th>Amount</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- <tr *ngFor="let service of selectedServices; let i = index; ">
                                            <td>{{ service.id }}</td>
                                            <td>{{ service.code }}</td>
                                            <td>{{ service.name }}</td>
                                            <td>{{ sampleRegisterForm.value.isB2B ? service.b2bamount :
                                                service.b2camount }} </td>
                                            <td>
                                                <button type="button" class="btn btn-danger btn-sm"
                                                  ><i
                                                        class="fa-solid fa-trash-can"></i></button>
                                            </td>
                                        </tr> -->
                                    </tbody>
                                </table>

                                <!-- Total Amount -->
                                <div class="text-end fw-bold">Total: {{ sampleRegisterForm.value.totalAmount }}</div>

                                <!-- Payment Section -->
                                <div class="mb-3">
                                    <label>Payment Method</label>
                                    <select class="form-select" id="paymentmode" formControlName="paymentmode">
                                        <!-- <option *ngFor="let paymentmode of paymentModes" [value]="paymentmode.name">
                                            {{ paymentmode.name }}
                                        </option> -->
                                    </select>
                                    <div *ngIf="sampleRegisterForm.get('paymentmode')?.invalid && submitted"
                                        class="text-danger small">
                                        <span
                                            *ngIf="sampleRegisterForm.get('paymentmode')?.hasError('required')">Payment
                                            Method is required.</span>
                                    </div>
                                </div>

                                <!-- Show Amount Input Field Only If Payment Mode is 'Cash' -->
                                <!-- <div class="mb-3" *ngIf="selectedPaymentMode === 'Cash'">
                                    <input type="number" class="form-control" formControlName="amount"
                                        placeholder="Enter amount">
                                    <div *ngIf="sampleRegisterForm.get('amount')?.invalid && submitted"
                                        class="text-danger small">
                                        <span *ngIf="sampleRegisterForm.get('amount')?.hasError('required')">Amount is
                                            required.</span>
                                    </div>
                                </div> -->

                                <!-- Show Additional Fields for Cheque -->
                                <!-- <div *ngIf="selectedPaymentMode === 'Cheque'">
                                    <div class="mb-3">
                                        <input type="number" class="form-control" formControlName="amount"
                                            placeholder="Enter amount">
                                        <div *ngIf="sampleRegisterForm.get('amount')?.invalid && submitted"
                                            class="text-danger small">
                                            <span *ngIf="sampleRegisterForm.get('amount')?.hasError('required')">Amount
                                                is required.</span>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <input type="text" class="form-control" placeholder="Cheque Number"
                                            formControlName="chequeNo">
                                        <div *ngIf="sampleRegisterForm.get('chequeNo')?.invalid && submitted"
                                            class="text-danger small">
                                            <span
                                                *ngIf="sampleRegisterForm.get('chequeNo')?.hasError('required')">Cheque
                                                No is required.</span>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <input type="date" class="form-control" placeholder="Cheque Date"
                                            formControlName="chequeDate">
                                        <div *ngIf="sampleRegisterForm.get('chequeDate')?.invalid && submitted"
                                            class="text-danger small">
                                            <span
                                                *ngIf="sampleRegisterForm.get('chequeDate')?.hasError('required')">Cheque
                                                Date is required.</span>
                                        </div>
                                    </div>
                                </div> -->

                                <!-- Show Additional Field for Credit Card -->
                                <!-- <div *ngIf="selectedPaymentMode === 'Credit Card'">
                                    <div class="mb-3">
                                        <input type="number" class="form-control" formControlName="amount"
                                            placeholder="Enter amount">
                                        <div *ngIf="sampleRegisterForm.get('amount')?.invalid && submitted"
                                            class="text-danger small">
                                            <span *ngIf="sampleRegisterForm.get('amount')?.hasError('required')">Amount
                                                is required.</span>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <input type="text" class="form-control" placeholder="Transaction ID"
                                            formControlName="transactionId">
                                        <div *ngIf="sampleRegisterForm.get('transactionId')?.invalid && submitted"
                                            class="text-danger small">
                                            <span
                                                *ngIf="sampleRegisterForm.get('transactionId')?.hasError('required')">Transaction
                                                ID is required.</span>
                                        </div>
                                    </div>
                                </div> -->

                            </form>
                        </div>

                        <div class="modal-footer">
                            <button class="btn btn-success">
                                {{ isEditModal ? 'Update' : 'Save' }}
                            </button>
                            <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Sample Register List Table -->
<div class="container mt-4" style="max-width: 100%;">
    <div class="table-responsive border border-dark p-3 rounded">
        <table class="table table-bordered table-striped table-hover text-center">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Sample Register ID</th>
                    <th>Middle Name</th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <!-- <tr >
                    <td>{{ i + 1 }}</td>
                    <td>{{ sampleRegister.id }}</td>
                    <td>{{sampleRegister.title}} {{ sampleRegister.middleName }} {{sampleRegister.firstName}}</td>
                    <td>{{ sampleRegister.status }}</td>
                    <td>
                        <button class="btn btn-primary btn-sm" (click)="editSampleRegister(sampleRegister)"
                            data-bs-toggle="modal" data-bs-target="#sampleRegisterModal">
                            &#9998;
                        </button> -->

                <!-- Delete Button: Shown when the sample register is active -->
                <!-- <button *ngIf="sampleRegister.isActive" class="btn btn-danger btn-sm"
                            (click)="toggleActive(sampleRegister)">
                            <i class="fa-solid fa-trash-can"></i>
                        </button> -->

                <!-- Check Button: Shown when the sample register is inactive -->
                <!-- <button *ngIf="!sampleRegister.isActive" class="btn btn-success btn-sm"
                            (click)="toggleActive(sampleRegister)">
                            <i class="fa-solid fa-check"></i>
                        </button>
                    </td>
                </tr> -->
            </tbody>
        </table>
    </div>
    <!-- <div class="border border-dark p-3 rounded bg-danger text-center mt-3 fw-bold text-white"
        *ngIf="searchClicked && filteredSampleRegisters.length === 0">
        No data found
    </div> -->
</div>